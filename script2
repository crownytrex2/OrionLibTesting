local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local ninjaEvent = player:WaitForChild("ninjaEvent")
local RunService = game:GetService("RunService")

local running = false

-- Coroutine to run the loop separately
local function katanaLoop()
	while running do
		-- Fire the swing
		ninjaEvent:FireServer("swingKatana")

		-- Make the character jump
		local character = player.Character or player.CharacterAdded:Wait()
		local humanoid = character:FindFirstChildWhichIsA("Humanoid")
		if humanoid then
			humanoid.Jump = true
		end

		wait(3)
	end
end

-- Toggle the running state with K key
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end

	if input.KeyCode == Enum.KeyCode.K then
		running = not running
		print("Script Toggled:", running and "ON" or "OFF")
		
		if running then
			coroutine.wrap(katanaLoop)()
		end
	end
end)
